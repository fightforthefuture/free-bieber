<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
	<head>
		<title>OverlayRecorder</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" href="/css/reset.css" type="text/css" />
        <link rel="stylesheet" href="/css/screen.css" type="text/css" />
		<style type="text/css" media="screen">
		#flashContent {width:480px;height:360px;}
		#bodydiv {width:100%; height:100%; padding: 20px;}
        a.large_button {float: left;}
        .others {
            width: 374px; 
            height: 55px; 
            position: absolute; 
            z-index: 9; 
            left: 25px; 
            top: 25px; 
            display: none;
            }
        #recording {background: url(/img/fRecording.png) no-repeat;}
        #not {background: url(/img/fNot.png) no-repeat;}
        .status {
            clear: both;
            float: left;
            margin-left: 20px;
        }
		</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    
<script type="text/javascript" src="swfobject.js"></script>

	<script>
	/* This function will be called from flash after flash preloaded and it loded the overlay image */
		var swf;
		function onLoad()
		{
			swf = getMovieName('OverlayRecorder');
			initRecording() 
			
		}
		function debugRecording(value) 	{ var x=document.getElementById("status1"); x.innerHTML = value 	 }
		
		//This is called from flash, after this only we can allow interaction
		function mediaReady()
		{
			var x=document.getElementById("navigation1");
			x.style.visibility = "visible";
		}
		//this function called from flash and it will show you the progress. It will just dispatched the current media position only.
		
		function mediaSaving(value){var x=document.getElementById("status"); x.innerHTML = "Saving"}
		function mediaSaved(value){var x=document.getElementById("status"); x.innerHTML = "Saved"}
		function mediaProgress(value){}
		function publishProgress(status,percent,transferred,total,speed){ var x=document.getElementById("status"); x.innerHTML = "status > " +status + " :: percent > " +percent + " :: transferred > " +transferred + " :: total > " +total + " :: speed > " +speed  }
		function publishStatus(status){ var x=document.getElementById("status"); x.innerHTML = status  }
		function publishFinished(link){ var x=document.getElementById("status"); x.innerHTML = link; }
		function publishError(error){ var x=document.getElementById("status"); x.innerHTML = error }
		//following are function call to flash object
		function initRecording() 
		{
			swf.initRecording(); 
		}
		function startRecording() 
		{ 
			//var x=document.getElementById("navigation2");
			//x.style.visibility = "hidden";
            $('#recording').show();
            $('#not').hide();
			swf.startRecording(); 
		}
		function pauseRecording() 
		{
			var x=document.getElementById("navigation2");
			x.style.visibility = "visible";
            $('#recording').hide();
            $('#not').show();

			
			swf.pauseRecording(); 
		}
		function resetRecording() 
		{ 
			var x=document.getElementById("navigation2");
			x.style.visibility = "hidden";
			swf.resetRecording(); 
		}
		function publishRecording() 
		{ 
            $('#recording').hide();
            $('#not').hide();
            $('#flash').hide();
			swf.publishRecording(); 
		}
		function previewRecording() 
		{ 
			swf.previewRecording(); 
		}
		function getMovieName(movieName) { if (navigator.appName.indexOf("Microsoft") != -1) { return window[movieName] } else { return document[movieName] } }
		
	</script>
</head>
	<body>
	<div id="bodydiv" align="center" style="width:100%;height:100%;">
    <div id="recording" class="others"></div>
    <div id="not" class="others"></div>
		<div id="flash"  style="float:left;position:absolute; width:480px;height:360px;">
			<div id="flashContent">
			</div>
            <div id="navigation1" style="visibility:hidden;float:left;position:relative">
                <a href="javascript:startRecording()" class="large_button"><span>Record</span></a>
                <a href="javascript:pauseRecording()" class="large_button"><span>Pause Recording</span></a>
                <a href="javascript:resetRecording()" class="large_button"><span>Reset Recording</span></a>
                <a href="javascript:publishRecording()" class="large_button"><span>Publish</span></a><br/>
			</div>
            <div id="navigation2" style="visibility:hidden;float:left;position:relative">
                <a href="javascript:previewRecording()" class="large_button"><span>Preview Recording</span></a>
			</div>
		</div>
        <div id="status"></div>

	</div>
 	<script type="text/javascript"> 
		var so = new SWFObject("OverlayRecorder.swf", "OverlayRecorder", "480", "360", "10", "0x1E1E1E"); 
		so.addParam("scale", "noscale"); 
		so.addParam("align", "middle"); 
		so.addParam("salign", "tl");
		so.addParam("showmenu", "false");
		so.addParam("allowScriptAccess", "always");
		so.addParam("flashvars", "overlayimage=http://joshuablount.com/media/bars.png&filename=random");
        so.addParam("wmode", "opaque");
		so.write("flashContent"); 
    </script> 
	</body>
</html>
